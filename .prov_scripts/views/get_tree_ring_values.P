

%---------------------------------------------------------------------------------------------------
% FACT: yw_source_file(SourceId, SourceFile).
%...................................................................................................
yw_source_file(1,'get_tree_ring_values.R').


%---------------------------------------------------------------------------------------------------
% FACT: yw_workflow_script(WorkflowId, WorkflowName, SourceId, SourceFile).
%...................................................................................................
yw_workflow_script(1,tree_ring_data,1,'get_tree_ring_values.R').


%---------------------------------------------------------------------------------------------------
% FACT: yw_program(WorkflowId, ProgramName, WorkflowId, SourceId, BeginLine, EndLine).
%...................................................................................................
yw_program(1,tree_ring_data,nil,1,23,149).
yw_program(2,create_shapefile_dir,1,1,30,34).
yw_program(3,download_shapefile_archive,1,1,38,45).
yw_program(4,uncompress_shapefile,1,1,48,59).
yw_program(5,read_shapefile,1,1,63,71).
yw_program(6,get_treepolygon,1,1,93,105).
yw_program(7,extract_tree_ring_data,1,1,108,146).


%---------------------------------------------------------------------------------------------------
% FACT: yw_workflow(WorkflowId, WorkflowName, ParentWorkflowId, SourceId, BeginLine, EndLine).
%...................................................................................................
yw_workflow(1,tree_ring_data,nil,1,23,149).


%---------------------------------------------------------------------------------------------------
% FACT: yw_workflow_step(StepId, StepName, WorkflowId, SourceId, BeginLine, EndLine).
%...................................................................................................
yw_workflow_step(2,create_shapefile_dir,1,1,30,34).
yw_workflow_step(3,download_shapefile_archive,1,1,38,45).
yw_workflow_step(4,uncompress_shapefile,1,1,48,59).
yw_workflow_step(5,read_shapefile,1,1,63,71).
yw_workflow_step(6,get_treepolygon,1,1,93,105).
yw_workflow_step(7,extract_tree_ring_data,1,1,108,146).


%---------------------------------------------------------------------------------------------------
% FACT: yw_function(FunctionId, FunctionName, ParentWorkflowId, SourceId, BeginLine, EndLine).
%...................................................................................................


%---------------------------------------------------------------------------------------------------
% FACT: yw_data(DataId, DataName, WorkflowId, WorkflowName).
%...................................................................................................
yw_data(1,shapefile_archive,nil,nil).
yw_data(2,study_region,nil,nil).
yw_data(3,prediction_years,nil,nil).
yw_data(4,itrdb,nil,nil).
yw_data(5,study_region,1,tree_ring_data).
yw_data(6,user_created_dir,1,tree_ring_data).
yw_data(7,shapefile_archive,1,tree_ring_data).
yw_data(8,compressed_shapefile,1,tree_ring_data).
yw_data(9,shapefiles_dir,1,tree_ring_data).
yw_data(10,layer_boundary,1,tree_ring_data).
yw_data(11,layer_tracts,1,tree_ring_data).
yw_data(12,metadata_xml_file,1,tree_ring_data).
yw_data(13,tracts_xml_file,1,tree_ring_data).
yw_data(14,dataframe,1,tree_ring_data).
yw_data(15,tree_buffer,1,tree_ring_data).
yw_data(16,segments_approx_quarter_circle,1,tree_ring_data).
yw_data(17,treepolygon,1,tree_ring_data).
yw_data(18,label,1,tree_ring_data).
yw_data(19,'raw.dir',1,tree_ring_data).
yw_data(20,'extract.dir',1,tree_ring_data).
yw_data(21,prediction_years,1,tree_ring_data).
yw_data(22,calibration_years,1,tree_ring_data).
yw_data(23,measurement_type,1,tree_ring_data).
yw_data(24,chronology_type,1,tree_ring_data).
yw_data(25,'force.redo',1,tree_ring_data).
yw_data(26,itrdb,1,tree_ring_data).


%---------------------------------------------------------------------------------------------------
% FACT: yw_step_input(ProgramId, ProgramName, PortType, PortId, PortName, DataId, DataName).
%...................................................................................................
yw_step_input(7,extract_tree_ring_data,param,32,'force.redo',25,'force.redo').
yw_step_input(7,extract_tree_ring_data,param,31,chronology_type,24,chronology_type).
yw_step_input(7,extract_tree_ring_data,param,30,measurement_type,23,measurement_type).
yw_step_input(7,extract_tree_ring_data,param,29,'calib.years',22,calibration_years).
yw_step_input(7,extract_tree_ring_data,param,27,'extract.dir',20,'extract.dir').
yw_step_input(7,extract_tree_ring_data,param,26,'raw.dir',19,'raw.dir').
yw_step_input(7,extract_tree_ring_data,param,25,label,18,label).
yw_step_input(7,extract_tree_ring_data,in,28,recon_year,21,prediction_years).
yw_step_input(7,extract_tree_ring_data,in,24,polygon,17,treepolygon).
yw_step_input(6,get_treepolygon,in,22,quadsegs,16,segments_approx_quarter_circle).
yw_step_input(6,get_treepolygon,in,21,polygon,14,dataframe).
yw_step_input(6,get_treepolygon,in,20,width,15,tree_buffer).
yw_step_input(5,read_shapefile,in,18,dir,9,shapefiles_dir).
yw_step_input(5,read_shapefile,in,17,layer,10,layer_boundary).
yw_step_input(4,uncompress_shapefile,in,11,dir_name,6,user_created_dir).
yw_step_input(4,uncompress_shapefile,in,10,zipfile,8,compressed_shapefile).
yw_step_input(3,download_shapefile_archive,in,8,dir,6,user_created_dir).
yw_step_input(3,download_shapefile_archive,in,7,file_archive,7,shapefile_archive).
yw_step_input(2,create_shapefile_dir,in,5,dir_name,5,study_region).
yw_step_input(1,tree_ring_data,in,3,prediction_years,3,prediction_years).
yw_step_input(1,tree_ring_data,in,2,study_region,2,study_region).
yw_step_input(1,tree_ring_data,in,1,shapefile_archive,1,shapefile_archive).


%---------------------------------------------------------------------------------------------------
% FACT: yw_step_output(ProgramId, ProgramName, PortType, PortId, PortName, DataId, DataName).
%...................................................................................................
yw_step_output(1,tree_ring_data,out,4,itrdb,4,itrdb).
yw_step_output(2,create_shapefile_dir,out,6,user_created_dir,6,user_created_dir).
yw_step_output(3,download_shapefile_archive,out,9,compressed_shapefile,8,compressed_shapefile).
yw_step_output(4,uncompress_shapefile,out,12,shapefiles_dir,9,shapefiles_dir).
yw_step_output(4,uncompress_shapefile,out,13,layer_boundary,10,layer_boundary).
yw_step_output(4,uncompress_shapefile,out,14,layer_tracts,11,layer_tracts).
yw_step_output(4,uncompress_shapefile,out,15,metadata_xml_file,12,metadata_xml_file).
yw_step_output(4,uncompress_shapefile,out,16,tracts_xml_file,13,tracts_xml_file).
yw_step_output(5,read_shapefile,out,19,dataobject,14,dataframe).
yw_step_output(6,get_treepolygon,out,23,template,17,treepolygon).
yw_step_output(7,extract_tree_ring_data,out,33,list,26,itrdb).


%---------------------------------------------------------------------------------------------------
% FACT: yw_inflow(WorkflowId, WorkflowName, DataId, DataName, ProgramId, ProgramName).
%...................................................................................................
yw_inflow(1,tree_ring_data,21,prediction_years,7,extract_tree_ring_data).
yw_inflow(1,tree_ring_data,7,shapefile_archive,3,download_shapefile_archive).
yw_inflow(1,tree_ring_data,5,study_region,2,create_shapefile_dir).


%---------------------------------------------------------------------------------------------------
% FACT: yw_flow(SourceProgramId, SourceProgramName, SourcePortId, SourcePortName, DataId, DataName, SinkPortId, SinkPortName, SinkProgramId, SinkProgramName).
%...................................................................................................
yw_flow(2,create_shapefile_dir,6,user_created_dir,6,user_created_dir,11,dir_name,4,uncompress_shapefile).
yw_flow(2,create_shapefile_dir,6,user_created_dir,6,user_created_dir,8,dir,3,download_shapefile_archive).
yw_flow(3,download_shapefile_archive,9,compressed_shapefile,8,compressed_shapefile,10,zipfile,4,uncompress_shapefile).
yw_flow(4,uncompress_shapefile,12,shapefiles_dir,9,shapefiles_dir,18,dir,5,read_shapefile).
yw_flow(4,uncompress_shapefile,13,layer_boundary,10,layer_boundary,17,layer,5,read_shapefile).
yw_flow(5,read_shapefile,19,dataobject,14,dataframe,21,polygon,6,get_treepolygon).
yw_flow(6,get_treepolygon,23,template,17,treepolygon,24,polygon,7,extract_tree_ring_data).


%---------------------------------------------------------------------------------------------------
% FACT: yw_outflow(StepId, StepName, StepOutDataId, StepOutDataName, WorkflowId, WorkflowName, WorkflowOutDataId, WorkflowOutDataName).
%...................................................................................................
yw_outflow(7,extract_tree_ring_data,26,itrdb,1,tree_ring_data,4,itrdb).


%---------------------------------------------------------------------------------------------------
% FACT: yw_qualified_name(EntityType, Id, QualifiedName).
%...................................................................................................
yw_qualified_name(program,1,tree_ring_data).
yw_qualified_name(program,2,'tree_ring_data.create_shapefile_dir').
yw_qualified_name(program,3,'tree_ring_data.download_shapefile_archive').
yw_qualified_name(program,4,'tree_ring_data.uncompress_shapefile').
yw_qualified_name(program,5,'tree_ring_data.read_shapefile').
yw_qualified_name(program,6,'tree_ring_data.get_treepolygon').
yw_qualified_name(program,7,'tree_ring_data.extract_tree_ring_data').
yw_qualified_name(port,1,'tree_ring_data<-shapefile_archive').
yw_qualified_name(port,2,'tree_ring_data<-study_region').
yw_qualified_name(port,3,'tree_ring_data<-prediction_years').
yw_qualified_name(port,4,'tree_ring_data->itrdb').
yw_qualified_name(port,5,'tree_ring_data.create_shapefile_dir<-dir_name').
yw_qualified_name(port,6,'tree_ring_data.create_shapefile_dir->user_created_dir').
yw_qualified_name(port,7,'tree_ring_data.download_shapefile_archive<-file_archive').
yw_qualified_name(port,8,'tree_ring_data.download_shapefile_archive<-dir').
yw_qualified_name(port,9,'tree_ring_data.download_shapefile_archive->compressed_shapefile').
yw_qualified_name(port,10,'tree_ring_data.uncompress_shapefile<-zipfile').
yw_qualified_name(port,11,'tree_ring_data.uncompress_shapefile<-dir_name').
yw_qualified_name(port,12,'tree_ring_data.uncompress_shapefile->shapefiles_dir').
yw_qualified_name(port,13,'tree_ring_data.uncompress_shapefile->layer_boundary').
yw_qualified_name(port,14,'tree_ring_data.uncompress_shapefile->layer_tracts').
yw_qualified_name(port,15,'tree_ring_data.uncompress_shapefile->metadata_xml_file').
yw_qualified_name(port,16,'tree_ring_data.uncompress_shapefile->tracts_xml_file').
yw_qualified_name(port,17,'tree_ring_data.read_shapefile<-layer').
yw_qualified_name(port,18,'tree_ring_data.read_shapefile<-dir').
yw_qualified_name(port,19,'tree_ring_data.read_shapefile->dataobject').
yw_qualified_name(port,20,'tree_ring_data.get_treepolygon<-width').
yw_qualified_name(port,21,'tree_ring_data.get_treepolygon<-polygon').
yw_qualified_name(port,22,'tree_ring_data.get_treepolygon<-quadsegs').
yw_qualified_name(port,23,'tree_ring_data.get_treepolygon->template').
yw_qualified_name(port,24,'tree_ring_data.extract_tree_ring_data<-polygon').
yw_qualified_name(port,25,'tree_ring_data.extract_tree_ring_data<-label').
yw_qualified_name(port,26,'tree_ring_data.extract_tree_ring_data<-raw.dir').
yw_qualified_name(port,27,'tree_ring_data.extract_tree_ring_data<-extract.dir').
yw_qualified_name(port,28,'tree_ring_data.extract_tree_ring_data<-recon_year').
yw_qualified_name(port,29,'tree_ring_data.extract_tree_ring_data<-calib.years').
yw_qualified_name(port,30,'tree_ring_data.extract_tree_ring_data<-measurement_type').
yw_qualified_name(port,31,'tree_ring_data.extract_tree_ring_data<-chronology_type').
yw_qualified_name(port,32,'tree_ring_data.extract_tree_ring_data<-force.redo').
yw_qualified_name(port,33,'tree_ring_data.extract_tree_ring_data->list').
yw_qualified_name(data,1,'[shapefile_archive]').
yw_qualified_name(data,2,'[study_region]').
yw_qualified_name(data,3,'[prediction_years]').
yw_qualified_name(data,4,'[itrdb]').
yw_qualified_name(data,5,'tree_ring_data[study_region]').
yw_qualified_name(data,6,'tree_ring_data[user_created_dir]').
yw_qualified_name(data,7,'tree_ring_data[shapefile_archive]').
yw_qualified_name(data,8,'tree_ring_data[compressed_shapefile]').
yw_qualified_name(data,9,'tree_ring_data[shapefiles_dir]').
yw_qualified_name(data,10,'tree_ring_data[layer_boundary]').
yw_qualified_name(data,11,'tree_ring_data[layer_tracts]').
yw_qualified_name(data,12,'tree_ring_data[metadata_xml_file]').
yw_qualified_name(data,13,'tree_ring_data[tracts_xml_file]').
yw_qualified_name(data,14,'tree_ring_data[dataframe]').
yw_qualified_name(data,15,'tree_ring_data[tree_buffer]').
yw_qualified_name(data,16,'tree_ring_data[segments_approx_quarter_circle]').
yw_qualified_name(data,17,'tree_ring_data[treepolygon]').
yw_qualified_name(data,18,'tree_ring_data[label]').
yw_qualified_name(data,19,'tree_ring_data[raw.dir]').
yw_qualified_name(data,20,'tree_ring_data[extract.dir]').
yw_qualified_name(data,21,'tree_ring_data[prediction_years]').
yw_qualified_name(data,22,'tree_ring_data[calibration_years]').
yw_qualified_name(data,23,'tree_ring_data[measurement_type]').
yw_qualified_name(data,24,'tree_ring_data[chronology_type]').
yw_qualified_name(data,25,'tree_ring_data[force.redo]').
yw_qualified_name(data,26,'tree_ring_data[itrdb]').


%---------------------------------------------------------------------------------------------------
% FACT: yw_description(EntityType, Id, Name, Description)).
%...................................................................................................
yw_description(program,1,tree_ring_data,'get the tree ring chronologies for reconstruction of the paleoclimate.').
yw_description(program,2,create_shapefile_dir,'create a direcorty for downloading the shapefiles for the study region.').
yw_description(program,3,download_shapefile_archive,'download the zip file of the region which contains the boundary, tracts, metadata.xml and nps_tracts.xml files.').
yw_description(program,4,uncompress_shapefile,'create a directory as the archive filename and extract the files.').
yw_description(program,5,read_shapefile,'read the shapefile for the region and save it as a spatial vector object.').
yw_description(program,6,get_treepolygon,'Get Tree-ring data from the ITRDB for tree_buffer around GRCA').
yw_description(program,7,extract_tree_ring_data,'get all the tree ring chronologies and extract the values for the study region.').
