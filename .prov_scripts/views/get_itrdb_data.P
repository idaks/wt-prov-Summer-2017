

%---------------------------------------------------------------------------------------------------
% FACT: yw_source_file(SourceId, SourceFile).
%...................................................................................................
yw_source_file(1,'get_itrdb_data.R').


%---------------------------------------------------------------------------------------------------
% FACT: yw_workflow_script(WorkflowId, WorkflowName, SourceId, SourceFile).
%...................................................................................................
yw_workflow_script(1,get_itrdb_data,1,'get_itrdb_data.R').


%---------------------------------------------------------------------------------------------------
% FACT: yw_program(WorkflowId, ProgramName, WorkflowId, SourceId, BeginLine, EndLine).
%...................................................................................................
yw_program(1,get_itrdb_data,nil,1,1,40).
yw_program(2,get_shapefile,1,1,15,19).
yw_program(3,get_treepolygon,1,1,25,30).
yw_program(4,get_tree_ring_data,1,1,32,38).


%---------------------------------------------------------------------------------------------------
% FACT: yw_workflow(WorkflowId, WorkflowName, ParentWorkflowId, SourceId, BeginLine, EndLine).
%...................................................................................................
yw_workflow(1,get_itrdb_data,nil,1,1,40).


%---------------------------------------------------------------------------------------------------
% FACT: yw_workflow_step(StepId, StepName, WorkflowId, SourceId, BeginLine, EndLine).
%...................................................................................................
yw_workflow_step(2,get_shapefile,1,1,15,19).
yw_workflow_step(3,get_treepolygon,1,1,25,30).
yw_workflow_step(4,get_tree_ring_data,1,1,32,38).


%---------------------------------------------------------------------------------------------------
% FACT: yw_function(FunctionId, FunctionName, ParentWorkflowId, SourceId, BeginLine, EndLine).
%...................................................................................................


%---------------------------------------------------------------------------------------------------
% FACT: yw_data(DataId, DataName, WorkflowId, WorkflowName).
%...................................................................................................
yw_data(1,'prediction.year',nil,nil).
yw_data(2,shapefile_archive,nil,nil).
yw_data(3,user_label_itrdb,nil,nil).
yw_data(4,'calibration.year',nil,nil).
yw_data(5,tree_buffer,nil,nil).
yw_data(6,'ITRDB',nil,nil).
yw_data(7,shapefile_archive,1,get_itrdb_data).
yw_data(8,shapefile,1,get_itrdb_data).
yw_data(9,label,nil,nil).
yw_data(10,measurement_type,nil,nil).
yw_data(11,chronology_type,nil,nil).
yw_data(12,tree_buffer,1,get_itrdb_data).
yw_data(13,treepolygon,1,get_itrdb_data).
yw_data(14,user_label_itrdb,1,get_itrdb_data).
yw_data(15,measurement_type,1,get_itrdb_data).
yw_data(16,chronology_type,1,get_itrdb_data).
yw_data(17,'ITRDB',1,get_itrdb_data).


%---------------------------------------------------------------------------------------------------
% FACT: yw_step_input(ProgramId, ProgramName, PortType, PortId, PortName, DataId, DataName).
%...................................................................................................
yw_step_input(4,get_tree_ring_data,param,18,chronology_type,16,chronology_type).
yw_step_input(4,get_tree_ring_data,param,17,measurement_type,15,measurement_type).
yw_step_input(4,get_tree_ring_data,param,16,label,14,user_label_itrdb).
yw_step_input(4,get_tree_ring_data,in,15,treepolygon,13,treepolygon).
yw_step_input(3,get_treepolygon,in,13,polygon,8,shapefile).
yw_step_input(3,get_treepolygon,in,12,width,12,tree_buffer).
yw_step_input(2,get_shapefile,in,7,spatial_polygon,7,shapefile_archive).
yw_step_input(1,get_itrdb_data,param,11,chronology_type,11,chronology_type).
yw_step_input(1,get_itrdb_data,param,10,measurement_type,10,measurement_type).
yw_step_input(1,get_itrdb_data,param,9,label,9,label).
yw_step_input(1,get_itrdb_data,param,5,tree_buffer,5,tree_buffer).
yw_step_input(1,get_itrdb_data,param,4,calibration_year,4,'calibration.year').
yw_step_input(1,get_itrdb_data,in,3,user_label_itrdb,3,user_label_itrdb).
yw_step_input(1,get_itrdb_data,in,2,shapefile_archive,2,shapefile_archive).
yw_step_input(1,get_itrdb_data,in,1,prediction_year,1,'prediction.year').


%---------------------------------------------------------------------------------------------------
% FACT: yw_step_output(ProgramId, ProgramName, PortType, PortId, PortName, DataId, DataName).
%...................................................................................................
yw_step_output(1,get_itrdb_data,out,6,'ITRDB',6,'ITRDB').
yw_step_output(2,get_shapefile,out,8,polygon_shape,8,shapefile).
yw_step_output(3,get_treepolygon,out,14,treepolygon,13,treepolygon).
yw_step_output(4,get_tree_ring_data,out,19,itrdb,17,'ITRDB').


%---------------------------------------------------------------------------------------------------
% FACT: yw_inflow(WorkflowId, WorkflowName, DataId, DataName, ProgramId, ProgramName).
%...................................................................................................
yw_inflow(1,get_itrdb_data,16,chronology_type,4,get_tree_ring_data).
yw_inflow(1,get_itrdb_data,15,measurement_type,4,get_tree_ring_data).
yw_inflow(1,get_itrdb_data,14,user_label_itrdb,4,get_tree_ring_data).
yw_inflow(1,get_itrdb_data,12,tree_buffer,3,get_treepolygon).
yw_inflow(1,get_itrdb_data,7,shapefile_archive,2,get_shapefile).


%---------------------------------------------------------------------------------------------------
% FACT: yw_flow(SourceProgramId, SourceProgramName, SourcePortId, SourcePortName, DataId, DataName, SinkPortId, SinkPortName, SinkProgramId, SinkProgramName).
%...................................................................................................
yw_flow(2,get_shapefile,8,polygon_shape,8,shapefile,13,polygon,3,get_treepolygon).
yw_flow(3,get_treepolygon,14,treepolygon,13,treepolygon,15,treepolygon,4,get_tree_ring_data).


%---------------------------------------------------------------------------------------------------
% FACT: yw_outflow(StepId, StepName, StepOutDataId, StepOutDataName, WorkflowId, WorkflowName, WorkflowOutDataId, WorkflowOutDataName).
%...................................................................................................
yw_outflow(4,get_tree_ring_data,17,'ITRDB',1,get_itrdb_data,6,'ITRDB').


%---------------------------------------------------------------------------------------------------
% FACT: yw_qualified_name(EntityType, Id, QualifiedName).
%...................................................................................................
yw_qualified_name(program,1,get_itrdb_data).
yw_qualified_name(program,2,'get_itrdb_data.get_shapefile').
yw_qualified_name(program,3,'get_itrdb_data.get_treepolygon').
yw_qualified_name(program,4,'get_itrdb_data.get_tree_ring_data').
yw_qualified_name(port,1,'get_itrdb_data<-prediction_year').
yw_qualified_name(port,2,'get_itrdb_data<-shapefile_archive').
yw_qualified_name(port,3,'get_itrdb_data<-user_label_itrdb').
yw_qualified_name(port,4,'get_itrdb_data<-calibration_year').
yw_qualified_name(port,5,'get_itrdb_data<-tree_buffer').
yw_qualified_name(port,9,'get_itrdb_data<-label').
yw_qualified_name(port,10,'get_itrdb_data<-measurement_type').
yw_qualified_name(port,11,'get_itrdb_data<-chronology_type').
yw_qualified_name(port,6,'get_itrdb_data->ITRDB').
yw_qualified_name(port,7,'get_itrdb_data.get_shapefile<-spatial_polygon').
yw_qualified_name(port,8,'get_itrdb_data.get_shapefile->polygon_shape').
yw_qualified_name(port,12,'get_itrdb_data.get_treepolygon<-width').
yw_qualified_name(port,13,'get_itrdb_data.get_treepolygon<-polygon').
yw_qualified_name(port,14,'get_itrdb_data.get_treepolygon->treepolygon').
yw_qualified_name(port,15,'get_itrdb_data.get_tree_ring_data<-treepolygon').
yw_qualified_name(port,16,'get_itrdb_data.get_tree_ring_data<-label').
yw_qualified_name(port,17,'get_itrdb_data.get_tree_ring_data<-measurement_type').
yw_qualified_name(port,18,'get_itrdb_data.get_tree_ring_data<-chronology_type').
yw_qualified_name(port,19,'get_itrdb_data.get_tree_ring_data->itrdb').
yw_qualified_name(data,1,'[prediction.year]').
yw_qualified_name(data,2,'[shapefile_archive]').
yw_qualified_name(data,3,'[user_label_itrdb]').
yw_qualified_name(data,4,'[calibration.year]').
yw_qualified_name(data,5,'[tree_buffer]').
yw_qualified_name(data,6,'[ITRDB]').
yw_qualified_name(data,9,'[label]').
yw_qualified_name(data,10,'[measurement_type]').
yw_qualified_name(data,11,'[chronology_type]').
yw_qualified_name(data,7,'get_itrdb_data[shapefile_archive]').
yw_qualified_name(data,8,'get_itrdb_data[shapefile]').
yw_qualified_name(data,12,'get_itrdb_data[tree_buffer]').
yw_qualified_name(data,13,'get_itrdb_data[treepolygon]').
yw_qualified_name(data,14,'get_itrdb_data[user_label_itrdb]').
yw_qualified_name(data,15,'get_itrdb_data[measurement_type]').
yw_qualified_name(data,16,'get_itrdb_data[chronology_type]').
yw_qualified_name(data,17,'get_itrdb_data[ITRDB]').


%---------------------------------------------------------------------------------------------------
% FACT: yw_description(EntityType, Id, Name, Description)).
%...................................................................................................
yw_description(program,1,get_itrdb_data,'Get tree ring data for 10 deg width buffer using shapefile and for 60 years (1924:1983)').
yw_description(program,2,get_shapefile,'download shapefile archive and extract the shapefile for the grca region.').
yw_description(program,3,get_treepolygon,'Get Tree-ring data from the ITRDB for tree_buffer around GRCA').
yw_description(program,4,get_tree_ring_data,'Extract tree ring data for the grca region using get_itrdb function and treepolygon template.').
